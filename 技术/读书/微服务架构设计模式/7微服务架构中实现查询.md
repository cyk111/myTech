#### 微服务架构中实现查询


#### 实现查询的两种不同模式
- API组合模式
	- 查询数据提供方的服务实现查询操作，多个服务组合后返回结果
	- 实现技术 [[网关gateway]]  BFF 
	- API组合器
	- 缺点
		- 确定那个组件是查询操作的API组合器
		- 如何编写有效的聚合逻辑
		- 增加了额外开销，本来join可以，现在需要查询多个服务
		- 性能降低的风险
		- 缺乏事务数据的一致性
- 命令查询职责模式CQRS 
	- 使用事件来维护多个服务复制数据的只读视图，借此实现多个服务的数据查询
	- 使用API组合模式检索分散在多个服务中的数据会导致昂贵、低效的内存中链接
	- 拥有数据的服务将数据存储在不能有效支持所查询的表单或数据库中
	- 拥有数据的服务不一定是会实现查询操作的服务
	- 查询与执行分离
	- 好处
		- 微服务框架中实现高效的查询
		- 高效实现不同类型的查询
		- 实现问题隔离
	- 坏处
		- 更加复杂的架构
		-  处理数据服务导致延迟
	- ![[Pasted image 20220623162658.png]]
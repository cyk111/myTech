### 分区

### 分区的目的
- 为了扩展性
- 别称 partitions 分区  sharding 分片
- mongdb es solr 成为分片 shard
- hbase  region 区域
- bigtable tablet 表块
- cassandra riad 虚节点 vnode
- couchbase 虚桶 vbucket


### 分区会出现的问题
- 查询倾斜 热点

### 解决分区出现查询负载倾斜+消除热点的方法
- 随机写入，减少热点，不能随机分区，数据要查找，要聚合比较困难
- 安装范围分区，扫描简单，但是访问模式会导致访问热点
- 按照键进行散列分区，哈希函数，服务高效查询（一致性hash，应用于负载均衡场景）
- 定义参数+主键 进行hash
- 热点新闻，名人，hash不能消除热点，添加随机数可以解决此问题，但是读取是会麻烦

### 分片与次级索引
- 基于文档
	- 二级索引，索引在自己分区内，本地索引，分散/聚集 尾部延迟效应
- 基于关键字
	- 全局索引，索引本身分区，更好的负载均衡能力，写入相对麻烦复杂
	- 跨分区的分布式事务

### 
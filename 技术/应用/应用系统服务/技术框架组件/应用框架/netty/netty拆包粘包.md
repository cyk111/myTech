### netty拆包粘包

#### 为什么有拆包粘包
- tcp传输协议是面向流的，没有数据包界限，客户端向服务端发送数据时，可能是将一个完成的包拆分多个小报文，也可能是将多个报文合并成一个大报文，因此有了拆包和粘包的问题
- MTU (maximum transmission unit) 最大传输单元，网路链路层最大传输数据的大小，一般1500byte;
- MSS (Maximum Segment Size) 指TCP 最大报文长度，传输层一次发送最大数据的大小，
- MSS = MTU - ip首部 - TCP首部
- 如果 MSS + ip首部 + TCP首部 > MTU 那么数据包会被拆分多个发送，这就是拆包现象
- 滑动窗口，流量控制的一种有效手段，滑动窗口是数据接收方设置的窗口大小，可以提高网络吞吐量
- Nagle算法，为TCP/IP拥塞控制方法，用于解决频繁发送小数据包而带来的网络拥塞问题
	- 批量发送，写入缓冲区，积攒到一点大小在统一发送
	- Linux 默认开启Nagle算法，有效降低网络开销
	- netty 默认关闭Nagle算法，因为有延迟

#### 拆包粘包的解决方案
- 定义应用层的通信协议解决拆包粘包问题
	- 消息长度固定
	- 特定分隔符
	- 消息长度+消息内容
	- 
